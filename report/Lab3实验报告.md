# Lab3 实验报告

#### 姓名：杨迁		学号：19231120



Lab3 的主要工作就是建立一个符号表来管理常量、变量和函数。这里的符号表是使用 java 中的`HashMap`实现的，使用名称可以查找到对应的符号。变量声明时将符号放入符号表中，如果这时候符号表内已经存在同名的符号，则报错；表达式中如果出现标识符的引用，则到符号表中查找对应名称的符号，如果此时查找不到则报错。例如`int a = 0`这种声明时同时赋值的语句，视为先声明后赋值，也就是先将其插入符号表，再分配内存，最后计算表达式的值存入内存中。

实际操作中，由于函数和常量/变量可以重名，而常量和变量之间不能重名，因此符号表是一分为二的。函数表中存放的主要是函数的参数结构和返回值类型，常量在符号表中主要存放的是常量的值（该值在编译时直接计算得到，生成中间代码时并不为常量分配标签），变量在符号表中主要存放的是变量的标签。

声明、赋值、表达式、函数调用均是生成中间代码的单元，彼此之间可能互相嵌套，因此中间代码的生成是递归的，语法树中子节点的生成或运算结果通过标签（编号）的形式传递给父节点，从而自下而上完成中间代码的生成。
